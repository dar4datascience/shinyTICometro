#' connect2database
#'
#' @description this function handles connecting to an Postgres SQL db which holds
#' tables needed for the TICometro
#' @return db_connection : TICometro_db a lazy db that easily interacts with dplyr.
#'
#'@param get_connection TRUE/FALSE to get pure connection and not a direct table
#'@param table_name takes a string which selects the table for use. Automatically points to main table
#'
#' @noRd
#' @import pool 
#' @import dplyr
#' @export 
connect2database <- function() {
  #First Function automatically connects using local credentials by creating environment variables
  #https://shiny.rstudio.com/articles/pool-advanced.html
  
  #https://shiny.rstudio.com/articles/pool-dplyr.html
  ticometro_db_connection <- pool::dbPool(
    drv = odbc::odbc(),
    Driver = 'PostgreSQL ANSI', #REMOVE ANSI WHEN GOING INTO PRODUCTION
    Server = "132.248.10.243",
    Database = "resultados",
    UID = Sys.getenv("R_resultadosTIC_db_user"),
    #environment variable for user
    PWD = Sys.getenv("R_resultadosTIC_db_user_psswrd"),
    encoding = "UTF-8",
    minSize = 1
  )
  

  return(ticometro_db_connection)
  
  
}

